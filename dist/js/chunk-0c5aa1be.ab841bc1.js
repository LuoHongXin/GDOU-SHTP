(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c5aa1be"],{"23b9":function(e,r,t){"use strict";var a=t("461d"),o=t.n(a);o.a},"461d":function(e,r,t){},"706b":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"zhuce"},[t("el-page-header",{attrs:{content:"用户注册"},on:{back:e.goBack}}),t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-main",{staticStyle:{overflow:"auto"}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"Username"}},[t("el-input",{model:{value:e.ruleForm.Username,callback:function(r){e.$set(e.ruleForm,"Username",r)},expression:"ruleForm.Username"}})],1),t("el-form-item",{attrs:{label:"学号",prop:"studynum"}},[t("el-input",{model:{value:e.ruleForm.studynum,callback:function(r){e.$set(e.ruleForm,"studynum",r)},expression:"ruleForm.studynum"}})],1),t("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{model:{value:e.ruleForm.phone,callback:function(r){e.$set(e.ruleForm,"phone",r)},expression:"ruleForm.phone"}})],1),t("el-form-item",{attrs:{label:"微信号码",prop:"wechat"}},[t("el-input",{model:{value:e.ruleForm.wechat,callback:function(r){e.$set(e.ruleForm,"wechat",r)},expression:"ruleForm.wechat"}})],1),t("el-form-item",{attrs:{label:"宿舍",prop:"dorm"}},[t("el-input",{model:{value:e.ruleForm.dorm,callback:function(r){e.$set(e.ruleForm,"dorm",r)},expression:"ruleForm.dorm"}})],1),t("el-form-item",{attrs:{label:"班级",prop:"grade"}},[t("el-input",{model:{value:e.ruleForm.grade,callback:function(r){e.$set(e.ruleForm,"grade",r)},expression:"ruleForm.grade"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"pass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(r){e.$set(e.ruleForm,"pass",r)},expression:"ruleForm.pass"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(r){e.$set(e.ruleForm,"checkPass",r)},expression:"ruleForm.checkPass"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("注册")]),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)],1)},o=[];const{checkname:s,checksno:l,createuser:n,checkuserphone:u,checkuserwechat:i}=t("365c"),{setCookie:m}=t("ed08");var c={data(){var e=(e,r,t)=>{if(!r.trim())return t(new Error("用户名不能为空"));setTimeout(async()=>{if(r.length<3||r.length>8)t(new Error("用户名应为3到8位字符"));else{let e=await s(r);0===e.data?t():t(new Error("用户名已存在，请重新命名"))}},1e3)},r=(e,r,t)=>{r.trim()<6?t(new Error("密码必须为6位以上")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),t())},t=(e,r,t)=>{""===r.trim()?t(new Error("密码不能为空哦")):r.trim()!==this.ruleForm.pass?t(new Error("两次输入密码不一致!")):t()},a=(e,r,t)=>{/^[\u4e00-\u9fa5]{2}\S{0,2}\d{3,6}$/.test(r.trim())?t():t(new Error("请输入宿舍号,例:海安A309,海滨1栋104"))},o=async(e,r,t)=>{if(/^1[3456789]\d{9}$/.test(r.trim())){let{data:e}=await u(r);1==e?t(new Error("该手机号已被注册,若有问题请联系管理员")):t()}else t(new Error("请输入正确的手机号"))},n=(e,r,t)=>{/^[\u4e00-\u9fa5]{2,}\d{4}$/.test(r.trim())?t():t(new Error("专业+班别,例:'信计1161'"))},m=async(e,r,t)=>{if(/^20\d{10}$/.test(r.trim())){let e=await l(r);1===e.data?t(new Error("该学号已被人注册,若不是本人操作,请联系管理员")):t()}else t(new Error("请输学号,例如201611921119"))},c=async(e,r,t)=>{if(r)if(r.trim()){let{data:e}=await i(r);1==e?t(new Error("该微信号已被注册,若不是本人操作,请联系管理员")):t()}else t(new Error("微信号不能为空"));else t(new Error("请输入微信号"))};return{loading:!1,ruleForm:{pass:"",checkPass:"",Username:"",dorm:"",phone:"",grade:"",studynum:"",wechat:""},rules:{pass:[{validator:r,trigger:"blur"}],checkPass:[{validator:t,trigger:"blur"}],Username:[{validator:e,trigger:"blur"}],dorm:[{validator:a,trigger:"blur"}],phone:[{validator:o,trigger:"blur"}],grade:[{validator:n,trigger:"blur"}],studynum:[{validator:m,trigger:"blur"}],wechat:[{validator:c,trigger:"blur"}]}}},methods:{submitForm(e){this.loading=!0,this.$refs[e].validate(async e=>{if(e){let{pass:e,Username:r,dorm:t,phone:a,grade:o,studynum:s,wechat:l}=this.$data.ruleForm,u=await n({pass:e,Username:r,dorm:t,phone:a,grade:o,studynum:s,wechat:l});if(1!=u.code)return this.$notify({title:"sorry,注册失败",message:"请检查信息是否填写正确和完整",type:"warning"}),!1;this.$notify({title:"恭喜注册成功",message:`欢迎${r}来到海大二手交易平台`,type:"success"}),m("userId",u.data.ops[0]._id,1),m("userName",r,1),this.loading=!1,this.$router.push("/user")}})},resetForm(e){this.$refs[e].resetFields()},goBack(){this.$router.push("/user")}}},d=c,p=(t("23b9"),t("623f")),h=Object(p["a"])(d,a,o,!1,null,"b1ea0012",null);r["default"]=h.exports}}]);
//# sourceMappingURL=chunk-0c5aa1be.ab841bc1.js.map